-- MySQL Script generated by MySQL Workbench
-- ter 11 dez 2018 02:08:36 -02
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema movelariaRocha
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema movelariaRocha
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `movelariaRocha` DEFAULT CHARACTER SET utf8 ;
USE `movelariaRocha` ;

-- -----------------------------------------------------
-- Table `movelariaRocha`.`Empresa`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `movelariaRocha`.`Empresa` (
  `CNPJ` VARCHAR(14) NOT NULL,
  `nome` VARCHAR(50) NOT NULL,
  `rua` VARCHAR(45) NOT NULL,
  `bairro` VARCHAR(45) NULL DEFAULT NULL,
  `numero` INT(8) NOT NULL,
  `cidade` VARCHAR(45) NULL DEFAULT NULL,
  `tipo` VARCHAR(20) NOT NULL,
  PRIMARY KEY (`CNPJ`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `movelariaRocha`.`funcionario`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `movelariaRocha`.`funcionario` (
  `CPF` VARCHAR(11) NOT NULL,
  `nome` VARCHAR(50) NULL,
  `rua` VARCHAR(45) NULL,
  `bairro` VARCHAR(45) NULL DEFAULT NULL,
  `numero` INT(8) NULL,
  `cidade` VARCHAR(45) NULL DEFAULT NULL,
  `CEP` VARCHAR(45) NULL,
  `tipoFunc` VARCHAR(45) NULL,
  `telefone01` INT(11) NULL,
  `telefone02` INT(11) NULL DEFAULT NULL,
  PRIMARY KEY (`CPF`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `movelariaRocha`.`movel`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `movelariaRocha`.`movel` (
  `codigo` INT(11) NOT NULL AUTO_INCREMENT,
  `nome` VARCHAR(45) NULL DEFAULT NULL,
  `preco` FLOAT NULL DEFAULT NULL,
  `descricao` VARCHAR(45) NULL DEFAULT NULL,
  `marca` VARCHAR(45) NULL DEFAULT NULL,
  `cor` VARCHAR(45) NULL DEFAULT NULL,
  `qtd` INT(11) NULL DEFAULT NULL,
  `op_producao_CPF` VARCHAR(11) NOT NULL,
  PRIMARY KEY (`codigo`),
  INDEX `fk_movel_funcionario2_idx` (`op_producao_CPF` ASC),
  CONSTRAINT `fk_movel_funcionario2`
    FOREIGN KEY (`op_producao_CPF`)
    REFERENCES `movelariaRocha`.`funcionario` (`CPF`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `movelariaRocha`.`item`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `movelariaRocha`.`item` (
  `codItem` INT(11) NOT NULL AUTO_INCREMENT,
  `quantidade` INT(11) NOT NULL,
  `movel_codigo` INT(11) NOT NULL,
  PRIMARY KEY (`codItem`),
  INDEX `fk_item_produto1_idx` (`movel_codigo` ASC),
  CONSTRAINT `fk_item_produto1`
    FOREIGN KEY (`movel_codigo`)
    REFERENCES `movelariaRocha`.`movel` (`codigo`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `movelariaRocha`.`compra`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `movelariaRocha`.`compra` (
  `codComp` INT(11) NOT NULL AUTO_INCREMENT,
  `data` DATE NOT NULL,
  `valorTotal` DOUBLE NOT NULL,
  `item_codItem` INT(11) NOT NULL,
  `cliente_CNPJ` VARCHAR(14) NOT NULL,
  `vendedor_CPF` VARCHAR(12) NOT NULL,
  PRIMARY KEY (`codComp`, `item_codItem`),
  INDEX `fk_compra_item1_idx` (`item_codItem` ASC),
  INDEX `fk_compra_loja1_idx` (`cliente_CNPJ` ASC),
  INDEX `fk_compra_funcionario1_idx` (`vendedor_CPF` ASC),
  CONSTRAINT `fk_compra_item1`
    FOREIGN KEY (`item_codItem`)
    REFERENCES `movelariaRocha`.`item` (`codItem`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_compra_loja1`
    FOREIGN KEY (`cliente_CNPJ`)
    REFERENCES `movelariaRocha`.`Empresa` (`CNPJ`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_compra_funcionario1`
    FOREIGN KEY (`vendedor_CPF`)
    REFERENCES `movelariaRocha`.`funcionario` (`CPF`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `movelariaRocha`.`contatos`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `movelariaRocha`.`contatos` (
  `setor` VARCHAR(30) NOT NULL,
  `telefone` INT(11) NOT NULL,
  `Empresa_CNPJ` VARCHAR(14) NOT NULL,
  PRIMARY KEY (`telefone`),
  INDEX `fk_contatos_Empresa1_idx` (`Empresa_CNPJ` ASC),
  CONSTRAINT `fk_contatos_Empresa1`
    FOREIGN KEY (`Empresa_CNPJ`)
    REFERENCES `movelariaRocha`.`Empresa` (`CNPJ`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `movelariaRocha`.`controle`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `movelariaRocha`.`controle` (
  `id` INT(11) NOT NULL AUTO_INCREMENT,
  `login_user` VARCHAR(45) NULL DEFAULT NULL,
  `senha_user` VARCHAR(45) NULL DEFAULT NULL,
  `tipo_user` VARCHAR(45) NULL DEFAULT NULL,
  `vendedor_CPF` VARCHAR(12) NOT NULL,
  `op.producao_CPF` VARCHAR(12) NOT NULL,
  `funcionario_CPF` VARCHAR(12) NOT NULL,
  INDEX `controle_id_idx` (`id` ASC),
  INDEX `fk_controle_funcionario1_idx` (`funcionario_CPF` ASC),
  PRIMARY KEY (`id`),
  CONSTRAINT `fk_controle_funcionario1`
    FOREIGN KEY (`funcionario_CPF`)
    REFERENCES `movelariaRocha`.`funcionario` (`CPF`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `movelariaRocha`.`materia_prima`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `movelariaRocha`.`materia_prima` (
  `codigo` INT(11) NOT NULL AUTO_INCREMENT,
  `nome` VARCHAR(45) NULL DEFAULT NULL,
  `preco` FLOAT NULL DEFAULT NULL,
  `descricao` VARCHAR(45) NULL DEFAULT NULL,
  `qtd` VARCHAR(45) NULL DEFAULT NULL,
  `op_producao_CPF` VARCHAR(11) NOT NULL,
  PRIMARY KEY (`codigo`),
  INDEX `fk_materia_prima_funcionario1_idx` (`op_producao_CPF` ASC),
  CONSTRAINT `fk_materia_prima_funcionario1`
    FOREIGN KEY (`op_producao_CPF`)
    REFERENCES `movelariaRocha`.`funcionario` (`CPF`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `movelariaRocha`.`fornecido`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `movelariaRocha`.`fornecido` (
  `mprima_codigo` INT(11) NOT NULL,
  `cliente_CNPJ` VARCHAR(14) NOT NULL,
  `codFunc` INT(11) NULL DEFAULT NULL,
  PRIMARY KEY (`mprima_codigo`, `cliente_CNPJ`),
  INDEX `fk_fornecido_loja1_idx` (`cliente_CNPJ` ASC),
  CONSTRAINT `fk_fornecido_loja1`
    FOREIGN KEY (`cliente_CNPJ`)
    REFERENCES `movelariaRocha`.`Empresa` (`CNPJ`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_fornecido_produto1`
    FOREIGN KEY (`mprima_codigo`)
    REFERENCES `movelariaRocha`.`materia_prima` (`codigo`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `movelariaRocha`.`relatorio`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `movelariaRocha`.`relatorio` (
  `codRelatorio` INT(11) NOT NULL AUTO_INCREMENT,
  `data` VARCHAR(45) NULL DEFAULT NULL,
  `contexto` VARCHAR(45) NULL DEFAULT NULL,
  `gerente_CPF` VARCHAR(12) NOT NULL,
  PRIMARY KEY (`codRelatorio`),
  INDEX `fk_relatorio_gerente1_idx` (`gerente_CPF` ASC),
  CONSTRAINT `fk_relatorio_gerente1`
    FOREIGN KEY (`gerente_CPF`)
    REFERENCES `movelariaRocha`.`funcionario` (`CPF`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
